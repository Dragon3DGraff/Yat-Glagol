# üóÑÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- MySQL 8.0+ –∏–ª–∏ MariaDB 10.3+
- Node.js 18+

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞:

### 1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

```sql
CREATE DATABASE yat_glagol_chat CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```sql
CREATE USER 'yat_glagol_user'@'localhost' IDENTIFIED BY 'your_password';
GRANT ALL PRIVILEGES ON yat_glagol_chat.* TO 'yat_glagol_user'@'localhost';
FLUSH PRIVILEGES;
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ `server/`:

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=yat_glagol_chat

# –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
USE_MOCK_DB=false
NODE_ENV=development

# JWT —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
ENCRYPTION_KEY=your-super-secret-encryption-key-32-chars
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:

```bash
cd server
npm run dev:sequelize
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î:

```bash
cd server
node test-sequelize-friends.js
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```
‚úÖ Sequelize –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ú–æ–¥–µ–ª–∏ Sequelize —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
üë• [SEQUELIZE] getFriends –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1
üë• [SEQUELIZE] –ù–∞–π–¥–µ–Ω–æ 0 –¥—Ä—É–∂–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π
üë• [SEQUELIZE] –í–æ–∑–≤—Ä–∞—â–∞–µ–º 0 –¥—Ä—É–∑–µ–π
‚úÖ –ù–∞–π–¥–µ–Ω–æ 0 –¥—Ä—É–∑–µ–π:
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü:

–°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã:

- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `friends` - –¥—Ä—É–∂–µ—Å–∫–∏–µ —Å–≤—è–∑–∏
- `chat_rooms` - —á–∞—Ç-–∫–æ–º–Ω–∞—Ç—ã
- `messages` - —Å–æ–æ–±—â–µ–Ω–∏—è
- `room_participants` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–Ω–∞—Ç

## üîç –û—Ç–ª–∞–¥–∫–∞:

### –õ–æ–≥–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```
‚úÖ Sequelize –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ú–æ–¥–µ–ª–∏ Sequelize —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
```

### –õ–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥—Ä—É–∑–µ–π:

```
üë• [SEQUELIZE] getFriends –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 1
üë• [SEQUELIZE] –ù–∞–π–¥–µ–Ω–æ 0 –¥—Ä—É–∂–µ—Å–∫–∏—Ö —Å–≤—è–∑–µ–π
üë• [SEQUELIZE] –í–æ–∑–≤—Ä–∞—â–∞–µ–º 0 –¥—Ä—É–∑–µ–π
```

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### 1. –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:

```
‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Sequelize: connect ECONNREFUSED
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MySQL –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω.

### 2. –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:

```
‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Sequelize: Access denied for user
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –≤ `.env` —Ñ–∞–π–ª–µ.

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:

```
‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Sequelize: Unknown database
```

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ.

## üöÄ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö MySQL.
